<!DOCTYPE html>
<html lang="en">
<head>
  <title>Cart</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" integrity="sha256-UhQQ4fxEeABh4JrcmAJ1+16id/1dnlOEVCFOxDef9Lw=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <script src="https://code.responsivevoice.org/responsivevoice.js?key=0oX5Y7Q8"></script>
  <style>
      .mainpart{
          /* margin:2%; */
          margin-top: 60px;
      }
      .imgs{
        height:300px;
        width:288px;
      }
      .card{
        display:inline-block;
        /* height:300px;
        width:300px; */
        margin:2%;
        /* padding: 10px; */
      }
      .card-text{
        height:180px;
      }
      .card-footer{
          background-color: #f2f2f2;
      }
      .navbar-custom {
        background-color:#6441A5;
      }
      body{
        padding-top: 30px;
      }
      nav{
        height: 60px;
      }
      body {font-family: Arial, Helvetica, sans-serif;}
* {box-sizing: border-box;}

/* Button used to open the chat form - fixed at the bottom of the page */
.open-button {
  background-color: #6441A5;
  color: white;
  padding: 20px;
  padding-left: 25px;
  padding-right: 25px;
  border: none;
  cursor: pointer;
  opacity: 0.8;
  position: fixed;
  bottom: 23px;
  right: 28px;
  border-radius: 50%;
}

/* The popup chat - hidden by default */
.chat-popup {
  display: none;
  position: fixed;
  bottom: 0;
  right: 15px;
  border: 3px solid #f1f1f1;
  z-index: 9;
}

/* Add styles to the form container */
.form-container {
  max-width: 300px;
  padding: 10px;
  background-color: white;
}

/* Full-width textarea */
.form-container textarea {
  width: 100%;
  padding: 15px;
  margin: 5px 0 22px 0;
  border: none;
  background: #f1f1f1;
  resize: none;
  min-height: 200px;
}

/* When the textarea gets focus, do something */
.form-container textarea:focus {
  background-color: #ddd;
  outline: none;
}

/* Set a style for the submit/send button */
.form-container .btn {
  background-color: #4CAF50;
  color: white;
  padding: 16px 20px;
  border: none;
  cursor: pointer;
  width: 100%;
  margin-bottom:10px;
  opacity: 0.8;
}

/* Add a red background color to the cancel button */
.form-container .cancel {
  background-color: red;
}

/* Add some hover effects to buttons */
.form-container .btn:hover, .open-button:hover {
  opacity: 1;
}
  </style>
  <script>
      var images1 = ["https://rukminim1.flixcart.com/image/416/416/jzu60sw0/bean-bag-cover/8/t/3/xxxl-hv-bb-xxxl-tn-c-home-valley-original-imafjqtknyvys3fa.jpeg?q=70","https://rukminim1.flixcart.com/image/416/416/jsyyufk0/portable-laptop-table/d/s/2/mfb-melamine-fiberboard-shi-012-memeho-pink-original-imafedzfvg7npavy.jpeg?q=70","https://rukminim1.flixcart.com/image/416/416/jrf8o7k0/recliner/a/y/d/coffee-bean-cotton-frcbb1-furlay-original-imafd4qtgpdttypz.jpeg?q=70","https://rukminim1.flixcart.com/image/416/416/jufu4y80/headphone/x/q/t/maupin-i7-single-stereo-wireless-original-imafcczyt9hp8nvz.jpeg?q=70","https://rukminim1.flixcart.com/image/416/416/k6jnfrk0/headphone/r/m/c/boat-airdopes-431-twin-wireless-original-imafzzhyjp4fkehx.jpeg?q=70","https://rukminim1.flixcart.com/image/880/1056/watch/s/p/j/68004pp02-fastrack-original-imae4ub84hgx7rh6.jpeg?q=50","https://rukminim1.flixcart.com/image/416/416/k6ci8i80/iron/h/r/h/philips-gc090-750-w-dry-iron-750-w-dry-iron-blue-original-imafg5tdkt6en4yk.jpeg?q=70","https://rukminim1.flixcart.com/image/416/416/k0lbdzk0pkrrdj/induction-cook-top-refurbished/j/k/p/power-saver-u-pic-20-0-prestige-original-imafg6x65gskxzgy.jpeg?q=70","https://rukminim1.flixcart.com/image/416/416/kcuug7k0/mobile/x/u/q/samsung-galaxy-a51-sm-a515fmswins-original-imaftw9cecyhye7d.jpeg?q=70","https://rukminim1.flixcart.com/image/416/416/k7p37gw0/air-conditioner-new/9/n/g/ac-1t-gsc-12ntc3-wta-1-split-fixed-speed-godrej-original-imafpvjfnfhgwzv3.jpeg?q=70","https://rukminim1.flixcart.com/image/416/416/k4ss2a80/refrigerator-new/n/x/b/rr19t241bse-nl-2-samsung-original-imafnmkcsmkchra8.jpeg?q=70","https://rukminim1.flixcart.com/image/416/416/kdeum4w0/emergency-light/b/4/r/ssk-emb-07-01-syska-original-imafubkshdtggefy.jpeg?q=70"];
      var images = ["https://newsupdatetimes.com/wp-content/uploads/2019/12/2.jpg","https://cdn.pixabay.com/photo/2017/03/19/01/43/living-room-2155376_1280.jpg","https://cdn.pixabay.com/photo/2015/01/20/12/51/mobile-605422_1280.jpg","https://cdn.pixabay.com/photo/2016/12/07/09/46/washing-machine-1889087_960_720.jpg","https://cdn.pixabay.com/photo/2016/11/22/19/08/blur-1850082_1280.jpg","https://cdn.pixabay.com/photo/2017/11/02/19/14/saucepans-2912191_1280.jpg"];
      var titles1 = ["Home Valley","Laptop Table","Recliner Chair","Maupin i7 Double Earbud","boAt Airdopes","Fastrack Digital Watch","Philips Iron","Prestige induction Stove","Samsung Galaxy A51","Godrej AC","Samsung Refrigerator","SYSKALED"];
      var titles = ["Electronics","Furniture","Mobiles","Appliances","Fashion","Kitchen"];
    window.onload = function(){
      localStorage.citem = '';
      localStorage.count = 0;
      html = ``;
      for(i=0;i<6;i++){
        html += `<a href="cat/?id=${titles[i]}"><div class="card" style="width:18rem;background-color:#f2f2f2;border-radius:30px;border:0px;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
            <img class="card-img-top imgs" src="${images[i]}" alt="Card image cap">
            <div class="card-body">
              <h5 class="card-title" style="text-align:center;color:black;">${titles[i]}</h5>
            </div></div></a>
            `
      }
      document.getElementById("content").innerHTML = html; 
      $("#username").html(localStorage.username);
    }
    function searcher(){
        const search = document.getElementById("search").value;
        html = ``;
        var f = 0;
        for(i=0;i<6;i++){
          if(titles[i].toLowerCase().includes(search.toLowerCase())){
            f = 1;
            html += `<a href="cat/?id=${titles[i]}"><div class="card" style="width: 18rem;background-color:#f2f2f2;border-radius:30px;border:0px;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
            <img class="card-img-top imgs" src="${images[i]}" alt="Card image cap">
            <div class="card-body">
              <h5 class="card-title" style="text-align:center;">${titles[i]}</h5>
            </div>`
            html += `</div></a>`
          } 
        }
        if(f == 0){
          console.log("E");
          html = `Oops! No results found. Try Searching different keyword.`;
        }
        else{
          console.log("ND");
        }
        document.getElementById("content").innerHTML = html; 
    }
    if(localStorage.userid == null || localStorage.userid == 'null'){
      localStorage.username = "<%= user.user %>";
      localStorage.userid = "<%= user.userid %>";
    }
    function logout(){
        location.href = 'login';
        localStorage.userid = null;
        localStorage.username = null;
        return false;
    }
    function changelink()
      {
        document.getElementById("cart").href="cart?id="+localStorage.userid; 
      }
      function goto(c){
        if(c == 1){
          location.href = "cat/?id=Electronics";
        }
        else if(c == 2){
          location.href = "cat/?id=Furniture";
        }
        else if(c == 3){
          location.href = "cat/?id=Mobiles";
        }
        else if(c == 4){
          location.href = "cat/?id=Appliances";
        }
        else if(c == 5){
          location.href = "cat/?id=Fashion";
        }
        else if(c == 6){
          location.href = "cat/?id=Kitchen";
        }
        else if(c == 7){
          location.href = "cart?id="+localStorage.userid;
        }
        else if(c == 8){
          logout();
        }
      }
      function startr(){
        document.getElementById("gify").style.visibility = "visible";
      var recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition || window.mozSpeechRecognition || window.msSpeechRecognition)();
      recognition.lang = 'en-IN';
      recognition.interimResults = false;
      recognition.maxAlternatives = 5;
      recognition.start();
      recognition.onresult = function(event) {
          var regText = event.results[0][0].transcript.toLowerCase();
          console.log('You said: ', event.results[0][0].transcript);
          document.getElementById("tarea").innerHTML = event.results[0][0].transcript;
          document.getElementById("gify").style.visibility = "hidden";
          if(regText.includes("hello")){
            responsiveVoice.speak("Hello, Welcome to VR Shoppy. How can I help you?", "UK English Female", {onend:startr});
          }
          else if(regText.includes("electronics") || regText.includes("electronic")){
            responsiveVoice.speak("Sure, taking you to Electronics.", "UK English Female", {onend:goto(1)});
          }
          else if(regText.includes("furniture")){
            responsiveVoice.speak("Sure, taking you to Furniture.", "UK English Female", {onend:goto(2)});
          }
          else if(regText.includes("mobiles") || regText.includes("mobile") || regText.includes("phones") || regText.includes("phone")){
            responsiveVoice.speak("Sure, taking you to Mobiles.", "UK English Female", {onend:goto(3)});
          }
          else if(regText.includes("appliances")){
            responsiveVoice.speak("Sure, taking you to Appliances.", "UK English Female", {onend:goto(4)});
          }
          else if(regText.includes("fashion") || regText.includes("Fashion") || regText.includes("fashon")){
            responsiveVoice.speak("Sure, taking you to Fashion.", "UK English Female", {onend:goto(5)});
          }
          else if(regText.includes("kitchen")){
            responsiveVoice.speak("Sure, taking you to Kitchen.", "UK English Female", {onend:goto(6)});
          }
          else if(regText.includes("cart")){
            responsiveVoice.speak("Sure, taking you to Cart.", "UK English Female", {onend:goto(7)});
          }
          else if(regText.includes("log out") || regText.includes("logout") || regText.includes("log me out") || regText.includes("logmeout") || regText.includes("logoff")){
            responsiveVoice.speak("Sure, logging you out.", "UK English Female", {onend:goto(8)});
          }
          else{
            document.getElementById("search").value = regText;
            responsiveVoice.speak("Showing results for "+regText, "UK English Female");
            document.getElementById("myform").submit();
          }
      };
    }
  </script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-custom fixed-top navbar-dark">
        <a class="navbar-brand" href="/home" style="margin-left: 10vw;font-size:x-large;">VR Shoppy</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
          <!-- <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item active">
              <a class="nav-link" href="shop">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="" id="cart" onclick="changelink()">Cart</a>
            </li>
          </ul> -->    
          <form class="form-inline my-2 my-lg-0" id="myform" action="searching" method="POST" style="margin-left:1vw;">
            <input class="form-control mr-sm-2" type="search" placeholder="Search for products and brands" id="search" style="width: 40vw;" name="search">
            <!-- <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button> -->
          </form>
          <a href="vrmode" target="_blank" class="nav-link" style="color: white;" aria-expanded="false">
          
            <span style="font-size: 20px;margin-right: 2vw;"><i class="fas fa-vr-cardboard"></i> See in VR</span>
                </a>
          <ul class="navbar-nav ">
            <!-- PROFILE DROPDOWN - scrolling off the page to the right -->
            <li class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle" style="color: white;" id="navDropDownLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span id="username" style="font-size: 20px;"></span>
              </a>
              
                <div class="dropdown-menu" aria-labelledby="navDropDownLink">
                    <a class="dropdown-item" href="#">Profile</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" onClick="(function(){
                      location.href = 'login';
                      localStorage.userid = null;
                      localStorage.username = null;
                      localStorage.citem = '';
                      localStorage.count = 0;
                      return false;
                  })();return false;" style="cursor: pointer;">Logout</a>
                </div>
            </li>
        </ul>
            <form action="#" class="font-size-14 font-rale" style="margin-right:2vw;margin-left: 2vw;">
              <a id="cart" onclick="changelink()" class="py-2 rounded-pill color-primary-bg">
                <span class="font-size-16 px-2 text-white" style="cursor: pointer;font-size: 17px;"><i class="fas fa-shopping-cart"></i> Cart</span>
              </a>
          </form>
        </div>
      </nav>
      <section id="banner-area">
        <div class="owl-carousel owl-theme">
          <div class="item">
            <img src="images/banner1.png" alt="Banner1">
          </div>
          <div class="item">
            <img src="images/banner2.png" alt="Banner2">
          </div>
          <div class="item">
            <img src="images/banner3.png" alt="Banner3">
          </div>
      </div>
    </section>
    <button class="open-button" onclick="openForm()" style="z-index: 10;"><i class="fas fa-microphone" style="font-size: 20px;"></i></button>

<div class="chat-popup" id="myForm" style="z-index: 25;">
  <form action="/action_page.php" class="form-container">
    <textarea placeholder="Listening.." id="tarea" name="msg" required></textarea>
    <p style="text-align: center;"><img src="images/giphy.gif" id="gify" alt="gif" height="50px"></p>
    <!-- <button type="submit" class="btn">Send</button> -->
    <button type="button" class="btn cancel" style="margin-top: 20px;" onclick="closeForm()">Close</button>
  </form>
</div>
<script>
  function openForm() {
    document.getElementById("myForm").style.display = "block";
    startr();
  }
  
  function closeForm() {
    document.getElementById("myForm").style.display = "none";
    document.getElementById("tarea").innerHTML = "Listening...";
  }
  </script>
      <div class="mainpart" id="content" style="text-align: center;">
    </div>
    <script src="js/carousel.js" type="text/javascript"></script>
</body>
</html>